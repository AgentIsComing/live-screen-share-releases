<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Live Screen Share Desktop</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <main>
      <section class="card">
        <h1>Live Screen Share Desktop</h1>

        <div id="sharedControls" class="grid two">
          <label id="modeWrap">
            Mode
            <select id="mode">
              <option value="host">Host</option>
              <option value="viewer">Viewer</option>
            </select>
          </label>

          <label id="codeServiceWrap">
            Code service URL (host advanced)
            <input id="codeServiceUrl" type="text" placeholder="https://live-screen-share-code-service.jaydenrmaine.workers.dev" />
          </label>

          <label id="connectivityWrap">
            Connectivity
            <button id="startBackend" type="button">Start backend</button>
            <button id="stopBackend" type="button" class="danger" disabled>Stop backend</button>
            <button id="checkUpdates" type="button">Check app updates</button>
          </label>

          <label id="latencyWrap">
            Latency profile
            <select id="latencyProfile">
              <option value="ultra">Ultra (lowest delay)</option>
              <option value="low">Low</option>
              <option value="balanced">Balanced</option>
            </select>
          </label>

          <label id="bitrateWrap">
            Max video bitrate
            <select id="bitrate">
              <option value="2500000">2.5 Mbps</option>
              <option value="3500000">3.5 Mbps</option>
              <option value="5000000">5 Mbps</option>
              <option value="8000000">8 Mbps</option>
              <option value="12000000">12 Mbps</option>
            </select>
          </label>
        </div>

        <div id="hostPanel">
          <div class="grid two">
            <label>
              Video source
              <select id="videoSource">
                <option value="display">Display/Window capture</option>
                <option value="obs-camera">OBS Virtual Camera device</option>
              </select>
            </label>

            <label>
              Display/window source
              <select id="displaySource"></select>
            </label>

            <label>
              Audio mode
              <select id="audioMode">
                <option value="display">Display system audio</option>
                <option value="input">Audio input only</option>
                <option value="display+input">Display + input</option>
                <option value="none">No audio</option>
              </select>
            </label>

            <label>
              Camera device
              <select id="cameraDevice"></select>
            </label>

            <label>
              Audio input device
              <select id="audioDevice"></select>
            </label>
          </div>

          <div class="row">
            <button id="refreshDevices">Refresh devices</button>
            <button id="startHost">Start hosting</button>
            <button id="stopHost" class="danger" disabled>Stop hosting</button>
          </div>
        </div>

        <div id="viewerPanel" class="hidden">
          <div id="viewerForm" class="grid">
            <label>
              Room ID
              <input id="roomIdInput" type="text" placeholder="Room ID" />
            </label>
            <label>
              Room password
              <input id="roomPassword" type="password" placeholder="Room password" />
            </label>
            <div class="row">
              <button id="joinRoom" type="button">Connect</button>
            </div>
          </div>
        </div>

        <p id="status" class="status"></p>
        <p id="updateStatus" class="status"></p>
        <small id="version"></small>
      </section>

      <section class="card">
        <h2>Preview / Playback</h2>
        <video id="video" autoplay playsinline controls></video>
      </section>
    </main>

    <div id="hostStartModal" class="modal hidden" hidden>
      <div class="modal-card">
        <h2>Start Hosting</h2>
        <label>
          Room ID
          <input id="hostModalRoomId" type="text" placeholder="Enter room ID" />
        </label>
        <label>
          Room password
          <input id="hostModalPassword" type="password" placeholder="At least 4 characters" />
        </label>
        <div class="row">
          <button id="hostModalConfirm" type="button">Start now</button>
          <button id="hostModalCancel" type="button" class="danger">Cancel</button>
        </div>
      </div>
    </div>

    <script src="./app.js"></script>
  </body>
</html>

